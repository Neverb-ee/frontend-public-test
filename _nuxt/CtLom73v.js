import{ax as J,d as _,b as Q,t as Fe,ay as Y,S as se,z as x,u as le,T as xe,V as z,e as A,o as K,w,r as L,f as ue,g as t,W as $,P as B,b9 as we,q as re,h as P,i as N,m as Z,c as M,bc as Ae,R as Ke,X as ke,a as de,bd as Ie,aD as _e}from"./0guDz9_e.js";import{l as Le,u as Be,j as Te,c as ce}from"./D-u1rFXY.js";import{u as Se}from"./CiZBY2dj.js";import{_ as Re}from"./Bn1Jakrt.js";function Pe(){return{ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",SPACE_CODE:"Space"}}function Ve(n,u,a){return n===void 0?!1:Array.isArray(n)?n.some(s=>R(s,u,a)):R(n,u,a)}function R(n,u,a){return n===void 0||u===void 0?!1:typeof n=="string"?n===u:typeof a=="function"?a(n,u):typeof a=="string"?(n==null?void 0:n[a])===(u==null?void 0:u[a]):J(n,u)}function He(n,u,a){const s=n.findIndex(v=>J(v,u)),d=n.findIndex(v=>J(v,a));if(s===-1||d===-1)return[];const[l,b]=[s,d].sort((v,r)=>v-r);return n.slice(l,b+1)}const[ee,Oe]=Q("ListboxRoot"),je=_({__name:"ListboxRoot",props:{modelValue:{},defaultValue:{},multiple:{type:Boolean},orientation:{default:"vertical"},dir:{},disabled:{type:Boolean},selectionBehavior:{default:"toggle"},highlightOnHover:{type:Boolean},by:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(n,{expose:u,emit:a}){const s=n,d=a,{multiple:l,highlightOnHover:b,orientation:v,disabled:r,selectionBehavior:E,dir:m}=Fe(s),{getItems:g}=Y({isProvider:!0}),{handleTypeaheadSearch:k}=Le(),{primitiveElement:V,currentElement:f}=se(),F=Pe(),H=Be(m),fe=Se(f),O=x(),T=x(!1),q=x(!0),p=le(s,"modelValue",d,{defaultValue:s.defaultValue??(l.value?[]:void 0),passive:s.modelValue===void 0,deep:!0});function ve(e){if(T.value=!0,s.multiple){const o=Array.isArray(p.value)?[...p.value]:[],i=o.findIndex(c=>R(c,e,s.by));s.selectionBehavior==="toggle"?(i===-1?o.push(e):o.splice(i,1),p.value=o):(p.value=[e],O.value=e)}else s.selectionBehavior==="toggle"&&R(p.value,e,s.by)?p.value=void 0:p.value=e;setTimeout(()=>{T.value=!1},1)}const h=x(null),G=x(null),I=x(!1),U=x(!1),te=z(),W=z(),ae=z();function j(){return g().map(e=>e.ref).filter(e=>e.dataset.disabled!=="")}function y(e,o=!0){if(!e)return;h.value=e,q.value&&h.value.focus(),o&&h.value.scrollIntoView({block:"nearest"});const i=g().find(c=>c.ref===e);d("highlight",i)}function me(e){if(I.value)ae.trigger(e);else{const o=g().find(i=>R(i.value,e,s.by));o&&(h.value=o.ref,y(o.ref))}}function pe(e){h.value&&h.value.isConnected&&(e.preventDefault(),e.stopPropagation(),U.value||h.value.click())}function he(e){if(q.value){if(T.value=!0,I.value)W.trigger(e);else{const o=e.altKey||e.ctrlKey||e.metaKey;if(o&&e.key==="a"&&l.value){const i=g(),c=i.map(C=>C.value);p.value=[...c],e.preventDefault(),y(i[i.length-1].ref)}else if(!o){const i=k(e.key,g());i&&y(i)}}setTimeout(()=>{T.value=!1},1)}}function ge(){U.value=!0}function be(){requestAnimationFrame(()=>{U.value=!1})}function oe(){$(()=>{const e=new KeyboardEvent("keydown",{key:"PageUp"});ie(e)})}function X(e){const o=h.value;o!=null&&o.isConnected&&(G.value=o),h.value=null,d("leave",e)}function ye(e){var i,c;const o=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if((i=e.currentTarget)==null||i.dispatchEvent(o),d("entryFocus",o),!o.defaultPrevented)if(G.value)y(G.value);else{const C=(c=j())==null?void 0:c[0];y(C)}}function ie(e){const o=Te(e,v.value,H.value);if(!o)return;let i=j();if(h.value){if(o==="last")i.reverse();else if(o==="prev"||o==="next"){o==="prev"&&i.reverse();const c=i.indexOf(h.value);i=i.slice(c+1)}Ce(e,i[0])}if(i.length){const c=!h.value&&o==="prev"?i.length-1:0;y(i[c])}if(I.value)return W.trigger(e)}function Ce(e,o){var c;if(!(I.value||s.selectionBehavior!=="replace"||!l.value||!Array.isArray(p.value)||(e.altKey||e.ctrlKey||e.metaKey)&&!e.shiftKey)&&e.shiftKey){const C=g().filter(S=>S.ref.dataset.disabled!=="");let D=(c=C.find(S=>S.ref===o))==null?void 0:c.value;if(e.key===F.END?D=C[C.length-1].value:e.key===F.HOME&&(D=C[0].value),!D||!O.value)return;const Ee=He(C.map(S=>S.value),O.value,D);p.value=Ee}}async function ne(e){if(await $(),I.value)te.trigger(e);else{const o=j(),i=o.find(c=>c.dataset.state==="checked");i?y(i):o.length&&y(o[0])}}return xe(p,()=>{T.value||$(()=>{ne()})},{immediate:!0,deep:!0}),u({highlightedElement:h,highlightItem:me,highlightFirstItem:oe,highlightSelected:ne,getItems:g}),Oe({modelValue:p,onValueChange:ve,multiple:l,orientation:v,dir:H,disabled:r,highlightOnHover:b,highlightedElement:h,isVirtual:I,virtualFocusHook:te,virtualKeydownHook:W,virtualHighlightHook:ae,by:s.by,firstValue:O,selectionBehavior:E,focusable:q,onLeave:X,onEnter:ye,changeHighlight:y,onKeydownEnter:pe,onKeydownNavigation:ie,onKeydownTypeAhead:he,onCompositionStart:ge,onCompositionEnd:be,highlightFirstItem:oe}),(e,o)=>(K(),A(t(B),{ref_key:"primitiveElement",ref:V,as:e.as,"as-child":e.asChild,dir:t(H),"data-disabled":t(r)?"":void 0,onPointerleave:X,onFocusout:o[0]||(o[0]=async i=>{const c=i.relatedTarget||i.target;await $(),h.value&&t(f)&&!t(f).contains(c)&&X(i)})},{default:w(()=>[L(e.$slots,"default",{modelValue:t(p)}),t(fe)&&e.name?(K(),A(t(Re),{key:0,name:e.name,value:t(p),disabled:t(r),required:e.required},null,8,["name","value","disabled","required"])):ue("",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),Xe=_({__name:"ListboxContent",props:{asChild:{type:Boolean},as:{}},setup(n){const{CollectionSlot:u}=Y(),a=ee(),s=we(!1,10);return(d,l)=>(K(),A(t(u),null,{default:w(()=>[re(t(B),{role:"listbox",as:d.as,"as-child":d.asChild,tabindex:t(a).focusable.value?t(a).highlightedElement.value?"-1":"0":void 0,"aria-orientation":t(a).orientation.value,"aria-multiselectable":!!t(a).multiple.value,"data-orientation":t(a).orientation.value,onMousedown:l[0]||(l[0]=N(b=>s.value=!0,["left"])),onFocus:l[1]||(l[1]=b=>{t(s)||t(a).onEnter(b)}),onKeydown:[l[2]||(l[2]=P(N(b=>{t(a).focusable.value&&t(a).onKeydownNavigation(b)},["prevent"]),["down","up","left","right","home","end"])),P(t(a).onKeydownEnter,["enter"]),t(a).onKeydownTypeAhead]},{default:w(()=>[L(d.$slots,"default")]),_:3},8,["as","as-child","tabindex","aria-orientation","aria-multiselectable","data-orientation","onKeydown"])]),_:3}))}}),[ze,De]=Q("ListboxGroup"),Je=_({__name:"ListboxGroup",props:{asChild:{type:Boolean},as:{}},setup(n){const u=n,a=ce(void 0,"reka-listbox-group");return De({id:a}),(s,d)=>(K(),A(t(B),Z({role:"group"},u,{"aria-labelledby":t(a)}),{default:w(()=>[L(s.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),Qe=_({__name:"ListboxFilter",props:{modelValue:{},autoFocus:{type:Boolean},disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"input"}},emits:["update:modelValue"],setup(n,{emit:u}){const a=n,d=le(a,"modelValue",u,{defaultValue:"",passive:a.modelValue===void 0}),l=ee(),{primitiveElement:b,currentElement:v}=se(),r=M(()=>a.disabled||l.disabled.value||!1),E=x();return Ae(()=>{var m;return E.value=(m=l.highlightedElement.value)==null?void 0:m.id}),Ke(()=>{l.focusable.value=!1,setTimeout(()=>{var m;a.autoFocus&&((m=v.value)==null||m.focus())},1)}),ke(()=>{l.focusable.value=!0}),(m,g)=>(K(),A(t(B),{ref_key:"primitiveElement",ref:b,as:m.as,"as-child":m.asChild,value:t(d),disabled:r.value?"":void 0,"data-disabled":r.value?"":void 0,"aria-disabled":r.value??void 0,"aria-activedescendant":E.value,type:"text",onKeydown:[P(N(t(l).onKeydownNavigation,["prevent"]),["down","up","home","end"]),P(t(l).onKeydownEnter,["enter"])],onInput:g[0]||(g[0]=k=>{d.value=k.target.value,t(l).highlightFirstItem(k)}),onCompositionstart:t(l).onCompositionStart,onCompositionend:t(l).onCompositionEnd},{default:w(()=>[L(m.$slots,"default",{modelValue:t(d)})]),_:3},8,["as","as-child","value","disabled","data-disabled","aria-disabled","aria-activedescendant","onKeydown","onCompositionstart","onCompositionend"]))}}),$e="listbox.select",[Me,Ne]=Q("ListboxItem"),Ye=_({__name:"ListboxItem",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"div"}},emits:["select"],setup(n,{emit:u}){const a=n,s=u,d=ce(void 0,"reka-listbox-item"),{CollectionItem:l}=Y(),{forwardRef:b,currentElement:v}=de(),r=ee(),E=M(()=>v.value===r.highlightedElement.value),m=M(()=>Ve(r.modelValue.value,a.value,r.by)),g=M(()=>r.disabled.value||a.disabled);async function k(f){s("select",f),!(f!=null&&f.defaultPrevented)&&!g.value&&f&&(r.onValueChange(a.value),r.changeHighlight(v.value))}function V(f){const F={originalEvent:f,value:a.value};_e($e,k,F)}return Ne({isSelected:m}),(f,F)=>(K(),A(t(l),{value:f.value},{default:w(()=>[Ie([E.value,m.value],()=>re(t(B),Z({id:t(d)},f.$attrs,{ref:t(b),role:"option",tabindex:t(r).focusable.value?E.value?"0":"-1":-1,"aria-selected":m.value,as:f.as,"as-child":f.asChild,disabled:g.value?"":void 0,"data-disabled":g.value?"":void 0,"data-highlighted":E.value?"":void 0,"data-state":m.value?"checked":"unchecked",onClick:V,onKeydown:P(N(V,["prevent"]),["space"]),onPointermove:F[0]||(F[0]=H=>{t(r).highlightedElement.value!==t(v)&&(t(r).highlightOnHover.value?t(r).changeHighlight(t(v),!1):t(r).focusable.value||t(r).changeHighlight(t(v),!1))})}),{default:w(()=>[L(f.$slots,"default")]),_:3},16,["id","tabindex","aria-selected","as","as-child","disabled","data-disabled","data-highlighted","data-state","onKeydown"]),F,1)]),_:3},8,["value"]))}}),Ze=_({__name:"ListboxItemIndicator",props:{asChild:{type:Boolean},as:{default:"span"}},setup(n){const u=n;de();const a=Me();return(s,d)=>t(a).isSelected.value?(K(),A(t(B),Z({key:0,"aria-hidden":"true"},u),{default:w(()=>[L(s.$slots,"default")]),_:3},16)):ue("",!0)}});export{je as _,Xe as a,Je as b,Qe as c,Ye as d,Ze as e,ze as f,ee as i};
